import{u as H,r,j as e,M,G as c,g as O,P as G,I as C,B as D,c as B,d as m}from"./index-So8Y0uMi.js";import{h as I}from"./moment-G82_0lEo.js";import{d as L}from"./Add-CKqOdQJH.js";import{f as J,a as V}from"./AcademyCategoryApi-BCSkgFb2.js";import{T as _,a as q,b as K,c as N,d as T,e as Q}from"./TableRow-ByAOLB1Q.js";import{E as X}from"./Edit-dsByrqxG.js";import{D as Y}from"./DeleteForever-Db3yxdnW.js";import{T as Z}from"./TablePagination-Bq1iu1it.js";import{D as $,a as ee}from"./DialogTitle-B--fWyEw.js";import{D as te}from"./DialogActions-Bk10_EIe.js";import"./LastPage-C7laYLYy.js";import"./MenuItem-CSdFaWhF.js";const P=[{id:"categoryId",label:"ID"},{id:"categoryName",label:"Name",minWidth:100},{id:"description",label:"Description",minWidth:100},{id:"createdBy",label:"Created By",align:"right"},{id:"updatedBy",label:"Updated By",align:"right"},{id:"insertedDate",label:"Inserted Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],ye=()=>{H();const[l,p]=r.useState(0),[n,S]=r.useState(10),[x,y]=r.useState([]),[v,d]=r.useState(!1),[E,u]=r.useState(!1),[g,h]=r.useState({categoryName:"",description:""}),[o,w]=r.useState({}),[W,ae]=r.useState(!1),[re,k]=r.useState(null),A=(t,a)=>{p(a)},R=t=>{S(+t.target.value),p(0)},f=JSON.parse(sessionStorage.getItem("user")),j={"Content-type":"application/json",Authorization:"Bearer "+f.accessToken},U=async()=>{try{const a=(await J(j)).data.content;if(a){const i=a.map(s=>({categoryId:s.categoryId,categoryName:s.categoryName,description:s.description,insertedDate:I(s.insertedDate).format("L"),updatedDate:I(s.updatedDate).format("L"),createdBy:s.createdBy?s.createdBy.userName:"No User",updatedBy:s.updatedBy?s.updatedBy.userName:"No User"}));y(i)}else y([])}catch(t){console.error("Error fetching data:",t)}};r.useEffect(()=>{U()},[W]);const b=t=>{h({...g,[t.target.name]:t.target.value,createdBy:{userId:f.userId}}),w({...o,[t.target.name]:null})},z=()=>{u(!1),h({categoryName:"",description:""}),d(!0)},F=async t=>{u(!0),d(!0);try{const i=(await V(t,j)).data;k(i.categoryId),h({categoryName:i.categoryName,description:i.description})}catch(a){console.error("Error fetching category details:",a)}};return e.jsxs(M,{title:e.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Category"}),e.jsxs(m,{variant:"contained",color:"primary",sx:{display:"flex",alignItems:"center",fontSize:"15px"},onClick:z,children:["Add",e.jsx(L,{sx:{color:"#fff"}})]})]}),children:[e.jsx(c,{container:!0,spacing:O}),e.jsxs(G,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(_,{sx:{maxHeight:440},children:e.jsxs(q,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(K,{children:e.jsx(N,{children:P.map(t=>e.jsx(T,{align:t.align,style:{minWidth:t.minWidth,fontWeight:600,fontSize:15},children:t.label},t.id))})}),e.jsx(Q,{children:x.slice(l*n,l*n+n).map(t=>e.jsx(N,{hover:!0,role:"checkbox",tabIndex:-1,children:P.map(a=>e.jsx(T,{align:a.align,children:a.id==="actions"?e.jsxs(e.Fragment,{children:[e.jsx(C,{onClick:()=>F(t.categoryId),color:"primary",children:e.jsx(X,{})}),e.jsx(C,{color:"error",children:e.jsx(Y,{})})]}):t[a.id]},a.id))},t.categoryId))})]})}),e.jsx(Z,{rowsPerPageOptions:[10,25,100],component:"div",count:x.length,rowsPerPage:n,page:l,onPageChange:A,onRowsPerPageChange:R})]}),e.jsxs($,{open:v,onClose:()=>d(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(ee,{sx:{fontSize:"16px"},children:E?"Edit Category":"Add Category"}),e.jsxs(D,{component:"form",noValidate:!0,sx:{p:3},children:[e.jsxs(c,{container:!0,spacing:2,children:[e.jsx(c,{item:!0,xs:12,children:e.jsx(B,{fullWidth:!0,label:"Category Name",name:"categoryName",value:g.categoryName,onChange:b,error:!!o.categoryName,helperText:o.categoryName})}),e.jsx(c,{item:!0,xs:12,children:e.jsx(B,{fullWidth:!0,label:"Description",name:"description",value:g.description,onChange:b,error:!!o.description,helperText:o.description,multiline:!0,rows:3})})]}),e.jsxs(te,{children:[e.jsx(m,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(m,{type:"submit",variant:"contained",color:"primary",children:"Save"})]})]})]})]})};export{ye as default};
