import{i as b,f as m,j as e,r as l,B as n,I as p,b as v,a as k,ac as R}from"./index-So8Y0uMi.js";var g={},_=b;Object.defineProperty(g,"__esModule",{value:!0});var j=g.default=void 0,$=_(m()),T=e;j=g.default=(0,$.default)((0,T.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");var u={},E=b;Object.defineProperty(u,"__esModule",{value:!0});var w=u.default=void 0,L=E(m()),B=e;w=u.default=(0,L.default)((0,B.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");const P=({filePath:t})=>{const[r,h]=l.useState(""),s=JSON.parse(sessionStorage.getItem("user"));return l.useEffect(()=>t?((async()=>{try{const i=await k.get(`${v}/file/downloadFile/?filePath=${encodeURIComponent(t)}`,{headers:{Authorization:`Bearer ${s==null?void 0:s.accessToken}`},responseType:"blob"}),c=new Blob([i.data],{type:i.headers["content-type"]}),f=URL.createObjectURL(c);h(f)}catch(i){console.error("Error fetching image:",i),h("")}})(),()=>{r&&URL.revokeObjectURL(r)}):void 0,[t,s==null?void 0:s.accessToken]),r?e.jsx("img",{src:r,style:{width:"100%",height:"100%",objectFit:"cover"},alt:"Advertisement"}):"Loading..."},z=async t=>{try{const r=await fetch(`${v}/advertisement/v1/queryAllAdvertisement`,{method:"GET",headers:t});if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);return await r.json()}catch(r){return console.error("Error fetching banner data:",r),[]}},A=()=>{const[t,r]=l.useState([]),[h,s]=l.useState(!0),[d,i]=l.useState(0),c=JSON.parse(sessionStorage.getItem("user")),f={"Content-Type":"application/json",Authorization:`Bearer ${c==null?void 0:c.accessToken}`};l.useEffect(()=>{(async()=>{s(!0);try{const o=await z(f);if(o.length>0){const C=o.map(x=>({advertisementId:x.advertisementId,filePath:x.filePath||null}));r(C)}else r([])}catch(o){console.error("Error fetching data:",o)}finally{s(!1)}})()},[]),l.useEffect(()=>{if(t.length<=1)return;const a=setInterval(()=>{i(o=>(o+1)%t.length)},3e3);return()=>clearInterval(a)},[t.length]);const S=()=>{i(a=>(a+1)%t.length)},y=()=>{i(a=>(a-1+t.length)%t.length)},I=a=>{i(a)};return e.jsx(n,{sx:{width:"100%",height:{xs:300,sm:400,md:450},position:"relative",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)",border:"1px solid #e2e8f0"},children:e.jsx(n,{sx:{width:"100%",height:"100%",position:"relative"},children:h?e.jsx(n,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",background:"#f8fafc"},children:e.jsx(n,{sx:{width:40,height:40,borderRadius:"50%",border:"3px solid #e2e8f0",borderTop:"3px solid #3b82f6",animation:"spin 1s linear infinite","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}})}):e.jsx(n,{sx:{position:"relative",width:"100%",height:"100%",overflow:"hidden"},children:t.length>0?e.jsxs(e.Fragment,{children:[e.jsx(n,{sx:{display:"flex",width:`${t.length*100}%`,height:"100%",transform:`translateX(-${d*100/t.length}%)`,transition:"transform 0.5s ease-in-out"},children:t.map((a,o)=>a.filePath?e.jsx(n,{sx:{width:`${100/t.length}%`,height:"100%",flexShrink:0,position:"relative","& img":{borderRadius:"16px"}},children:e.jsx(P,{filePath:a.filePath})},a.advertisementId):null)}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(p,{onClick:y,sx:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#374151",width:44,height:44,transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0,0,0,0.15)","&:hover":{backgroundColor:"white",transform:"translateY(-50%) scale(1.05)",boxShadow:"0 6px 20px rgba(0,0,0,0.2)"},"& svg":{fontSize:"1.25rem"}},children:e.jsx(j,{})}),e.jsx(p,{onClick:S,sx:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#374151",width:44,height:44,transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0,0,0,0.15)","&:hover":{backgroundColor:"white",transform:"translateY(-50%) scale(1.05)",boxShadow:"0 6px 20px rgba(0,0,0,0.2)"},"& svg":{fontSize:"1.25rem"}},children:e.jsx(w,{})})]}),t.length>1&&e.jsx(n,{sx:{position:"absolute",bottom:20,left:"50%",transform:"translateX(-50%)",display:"flex",gap:1.5},children:t.map((a,o)=>e.jsx(n,{onClick:()=>I(o),sx:{width:8,height:8,borderRadius:"50%",backgroundColor:o===d?"#3b82f6":"rgba(255, 255, 255, 0.6)",cursor:"pointer",transition:"all 0.2s ease","&:hover":{backgroundColor:o===d?"#2563eb":"rgba(255, 255, 255, 0.9)",transform:"scale(1.2)"}}},o))})]}):e.jsx(n,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",background:"#f8fafc",color:"#64748b",fontSize:"1rem",fontWeight:500},children:"No advertisements available"})})})})};A.propTypes={isLoading:R.bool};export{A as B};
